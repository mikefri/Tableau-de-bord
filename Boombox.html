<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tesla Boombox Mega Pack</title>
  <style>
    body {margin:0;background:#000;color:#fff;font-family:Arial;overflow:hidden;}
    h1 {text-align:center;padding:15px;background:#c00000;margin:0;position:relative;}
    .mode-btn {
      position:absolute;right:15px;top:10px;padding:10px 16px;
      background:#333;border:none;border-radius:8px;color:#fff;font-size:14px;
    }
    .mode-btn.tesla {background:#c00000;}
    .grid {display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:15px;padding:20px;}
    button {background:#1c1c1c;color:#fff;border:none;padding:20px;font-size:18px;border-radius:12px;box-shadow:0 4px 15px rgba(255,0,0,0.4);}
    button:active {transform:scale(0.95);}
    .cat {grid-column:1/-1;color:#c00000;font-size:22px;margin:20px 10px 0;}
    .stop {background:#c00000 !important;font-size:24px;font-weight:bold;}
  </style>
</head>
<body>

  <h1>BOOMBOX MEGA PACK
    <button id="modeBtn" class="mode-btn">MODE PC üñ•Ô∏è</button>
  </h1>

  <div class="grid" id="grid">
    <!-- Les boutons sont g√©n√©r√©s en JS pour rester propre -->
  </div>

  <script>
    // === CONFIGURATION DES SONS ===
    const sounds = [
      {cat: "CLASSIQUES", list: [
        {name:"La Cucaracha", id:"lacunaracha"},
        {name:"Fart Symphony", id:"fart"},
        {name:"Rick Roll", id:"rickroll"},
        {name:"Cri de ch√®vre", id:"goat"},
        {name:"Applaudissements", id:"applause"},
        {name:"Snake Nokia", id:"snake"}
      ]},
      {cat: "MEMES 2025", list: [
        {name:"YEET !", id:"yeet"},
        {name:"Bruh", id:"bruh"},
        {name:"Vine Boom", id:"vineboom"},
        {name:"Sad Trombone", id:"trombone"},
        {name:"Airhorn MLG", id:"airhorn"}
      ]},
      {cat: "TROLL ULTIME", list: [
        {name:"Police US", id:"police"},
        {name:"Gyrophare FR", id:"frenchsiren"},
        {name:"Coffin Dance", id:"coffin"},
        {name:"Nyan Cat", id:"nyan"}
      ]}
    ];

    let teslaMode = false;  // false = PC, true = Tesla

    const modeBtn = document.getElementById("modeBtn");
    const grid = document.getElementById("grid");

    // === SWITCH MODE ===
    modeBtn.onclick = () => {
      teslaMode = !teslaMode;
      modeBtn.textContent = teslaMode ? "MODE TESLA üöó" : "MODE PC üñ•Ô∏è";
      modeBtn.classList.toggle("tesla");
      buildButtons();
    };

    // === G√âN√âRATION DES BOUTONS ===
    function buildButtons() {
      grid.innerHTML = "";
      sounds.forEach(category => {
        const cat = document.createElement("div");
        cat.className = "cat";
        cat.textContent = category.cat;
        grid.appendChild(cat);

        category.list.forEach(s => {
          const btn = document.createElement("button");
          btn.textContent = s.name;
          btn.onclick = () => playSound(s.id, s.name);
          grid.appendChild(btn);
        });
      });

      // Bouton STOP toujours en bas
      const stop = document.createElement("button");
      stop.textContent = "STOP IMM√âDIAT";
      stop.className = "stop";
      stop.onclick = () => teslaMode ? location.href = "tesla://boombox?stop=1" : alert("STOP envoy√© !");
      grid.appendChild(stop);
    }

    // === FONCTION PLAY ===
    function playSound(id, name) {
      if (teslaMode) {
        location.href = `tesla://boombox?sound=${id}`;
      } else {
        alert("Boombox ‚Üí " + name.toUpperCase());
        console.log("Lien Tesla qui sera envoy√© :", `tesla://boombox?sound=${id}`);
      }
    }

    // Lancement
    buildButtons();

    // Bonus : plein √©cran auto dans la Tesla
    if (navigator.userAgent.includes("Tesla")) {
      document.documentElement.requestFullscreen?.();
      teslaMode = true;
      modeBtn.textContent = "MODE TESLA üöó";
      modeBtn.classList.add("tesla");
    }
  </script>
</body>
</html>
